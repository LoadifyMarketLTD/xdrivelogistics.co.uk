# XDrive Logistics - Netlify Configuration
# Note: We recommend deploying to Vercel for best Next.js 16 support.
# If using Netlify, ensure Node.js 20+ is configured (or set via package.json engines/.nvmrc)

[build]
  command = "npm run build"
  publish = "dist"
  command = "npx prisma generate --schema=./prisma/schema.prisma && npm run build"
  # Netlify auto-detects the publish directory for Next.js
  command = "npx prisma@5 generate --schema=./prisma/schema.prisma && npm run build"
  # Do NOT set publish directory - @netlify/plugin-nextjs manages this automatically
  # publish = "" is explicitly unset to let the Next.js plugin handle deployment
  command = "npm run build"
  publish = ".next"

[build.environment]
  NODE_VERSION = "20.12.2"
  NEXT_TELEMETRY_DISABLED = "1"

[functions]
  node_bundler = "esbuild"

[[plugins]]
  package = "@netlify/plugin-nextjs"

# Deployment Note:
# For Next.js 16 App Router and some API routes, Vercel offers more native support.
